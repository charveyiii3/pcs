<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Ads Debug - PCS Pet Shipper</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17538330823"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'AW-17538330823');
      
      // Debug: Log to console when gtag loads
      console.log('Google Ads gtag loaded - ID: AW-17538330823');
    </script>
    
    <style>
        .debug-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            font-family: Arial, sans-serif;
        }
        .status-box {
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .success { background: #d4edda; border-color: #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border-color: #f5c6cb; color: #721c24; }
        .warning { background: #fff3cd; border-color: #ffeaa7; color: #856404; }
        .info { background: #d1ecf1; border-color: #bee5eb; color: #0c5460; }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px;
        }
        .test-button:hover { background: #0056b3; }
        .code-block {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            margin: 15px 0;
        }
        pre { margin: 0; }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1><i class="fas fa-bug"></i> Google Ads Debug Tool</h1>
        <p>Use this page to diagnose Google Ads tracking issues on your PCS Pet Shipper website.</p>
        
        <!-- Status Checks -->
        <div class="status-box info">
            <h3>Google Ads Configuration</h3>
            <p><strong>Account ID:</strong> AW-17538330823</p>
            <p><strong>Tag Status:</strong> <span id="tag-status">Checking...</span></p>
            <p><strong>DataLayer Status:</strong> <span id="datalayer-status">Checking...</span></p>
        </div>
        
        <!-- Test Results -->
        <div id="test-results"></div>
        
        <!-- Manual Tests -->
        <div class="status-box">
            <h3>Manual Tests</h3>
            <p>Click these buttons to test conversion tracking:</p>
            <button class="test-button" onclick="testPageView()">Test Page View</button>
            <button class="test-button" onclick="testConversion()">Test Conversion Event</button>
            <button class="test-button" onclick="checkDataLayer()">Check DataLayer</button>
        </div>
        
        <!-- Troubleshooting Steps -->
        <div class="status-box warning">
            <h3><i class="fas fa-wrench"></i> Troubleshooting Steps</h3>
            <ol>
                <li><strong>Check Browser Console:</strong> Open Developer Tools ‚Üí Console tab for error messages</li>
                <li><strong>Verify Network Requests:</strong> Network tab should show requests to google-analytics.com</li>
                <li><strong>Test with Google Tag Assistant:</strong> Install Chrome extension and check tag firing</li>
                <li><strong>Check Ad Blocker:</strong> Disable ad blockers that might block Google Analytics</li>
                <li><strong>Verify Account ID:</strong> Confirm AW-17538330823 is correct in Google Ads</li>
            </ol>
        </div>
        
        <!-- Code Verification -->
        <div class="status-box info">
            <h3><i class="fas fa-code"></i> Current Implementation</h3>
            <div class="code-block">
                <pre>&lt;script async src="https://www.googletagmanager.com/gtag/js?id=AW-17538330823"&gt;&lt;/script&gt;
&lt;script&gt;
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'AW-17538330823');
&lt;/script&gt;</pre>
            </div>
        </div>
        
        <!-- Common Issues -->
        <div class="status-box error">
            <h3><i class="fas fa-exclamation-triangle"></i> Common Issues & Solutions</h3>
            <ul>
                <li><strong>Tag Not Firing:</strong> Check if script loads in Network tab, verify no JavaScript errors</li>
                <li><strong>Conversions Not Tracking:</strong> Conversion actions need to be set up in Google Ads first</li>
                <li><strong>Data Delay:</strong> Google Ads data can take 24-48 hours to appear</li>
                <li><strong>Ad Blockers:</strong> Many users have ad blockers that prevent tracking</li>
                <li><strong>Content Security Policy:</strong> Netlify/hosting might block external scripts</li>
            </ul>
        </div>
        
        <!-- Live Console -->
        <div class="status-box">
            <h3><i class="fas fa-terminal"></i> Live Console Output</h3>
            <div id="console-output" style="height: 200px; overflow-y: auto; background: #000; color: #0f0; padding: 15px; font-family: monospace;">
                <div>Console output will appear here...</div>
            </div>
        </div>
        
        <p><a href="index.html">‚Üê Back to Homepage</a></p>
    </div>

    <script>
        // Capture console output for display
        const consoleOutput = document.getElementById('console-output');
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const div = document.createElement('div');
            div.textContent = args.join(' ');
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        // Status checks
        function checkStatus() {
            // Check if gtag is loaded
            const tagStatus = document.getElementById('tag-status');
            const dataLayerStatus = document.getElementById('datalayer-status');
            
            if (typeof gtag !== 'undefined') {
                tagStatus.innerHTML = '<span style="color: green;">‚úÖ Loaded</span>';
                console.log('‚úÖ gtag function is available');
            } else {
                tagStatus.innerHTML = '<span style="color: red;">‚ùå Not Loaded</span>';
                console.log('‚ùå gtag function is not available');
            }
            
            if (typeof window.dataLayer !== 'undefined') {
                dataLayerStatus.innerHTML = '<span style="color: green;">‚úÖ Available (' + window.dataLayer.length + ' items)</span>';
                console.log('‚úÖ dataLayer is available with ' + window.dataLayer.length + ' items');
            } else {
                dataLayerStatus.innerHTML = '<span style="color: red;">‚ùå Not Available</span>';
                console.log('‚ùå dataLayer is not available');
            }
        }
        
        // Test functions
        function testPageView() {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_view', {
                    'send_to': 'AW-17538330823'
                });
                console.log('‚úÖ Page view event sent');
                alert('Page view event sent! Check console for details.');
            } else {
                console.log('‚ùå gtag not available for page view test');
                alert('gtag not available! Check console for errors.');
            }
        }
        
        function testConversion() {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'conversion', {
                    'send_to': 'AW-17538330823/test_conversion',
                    'value': 1.0,
                    'currency': 'USD'
                });
                console.log('‚úÖ Test conversion event sent');
                alert('Test conversion sent! Check Google Ads for data (may take 24-48 hours).');
            } else {
                console.log('‚ùå gtag not available for conversion test');
                alert('gtag not available! Check console for errors.');
            }
        }
        
        function checkDataLayer() {
            if (typeof window.dataLayer !== 'undefined') {
                console.log('DataLayer contents:', window.dataLayer);
                alert('DataLayer contents logged to console. Check developer tools.');
            } else {
                console.log('‚ùå DataLayer not available');
                alert('DataLayer not available!');
            }
        }
        
        // Run status check after page loads
        window.addEventListener('load', function() {
            setTimeout(checkStatus, 2000); // Wait 2 seconds for scripts to load
        });
        
        // Log initial page load
        console.log('üîç Google Ads Debug Page Loaded');
        console.log('üìä Checking Google Ads implementation...');
    </script>
</body>
</html>